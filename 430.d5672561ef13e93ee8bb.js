"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[430],{6763:function(e,r,t){t.d(r,{qn:function(){return h},fR:function(){return x},o4:function(){return n}});var n={};t.r(n),t.d(n,{createFeed:function(){return f}});var c=t(1549),a=t(9041),i=t(3719),o=t(6942);function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){l(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function f(e){var r=e.effect,t=(0,c.yM)(),n=(0,c.GW)((function(e){var r=e.slug;return o.v_("articles/".concat(r,"/favorite")).then((function(e){return e.data}))})),s=(0,c.GW)((function(e){var r=e.slug;return o.IV("articles/".concat(r,"/favorite")).then((function(e){return e.data}))})),l=(0,c.MT)({articlesCount:0,articles:[]}).on(r.doneData,(function(e,r){return r})).on([n.done,s.done],(function(e,r){var t=r.params,n=r.result;return u(u({},e),{},{articles:e.articles.map((function(e){return e.slug!==t.slug?e:u(u({},e),{},{favorited:n.article.favorited,favoritesCount:n.article.favoritesCount})}))})})),f=l.map((function(e){return e.articlesCount})),d=l.map((function(e){return e.articles})),m=(0,i.status)({effect:r}),j=(0,c.$e)(m,d,(function(e,r){return("done"===e||"fail"===e)&&0===r.length}));return(0,c.Vl)({source:t,match:{favorite:function(e){return!0===e.favorited},unfavorite:function(e){return!1===e.favorited}},cases:{favorite:s,unfavorite:n}}),{favoriteArticleToggled:t,$feed:l,$totalPages:f,$articles:d,$isEmptyFeed:j,selectors:{useLoading:function(){return(0,a.oR)(r.pending)},useIsEmpty:function(){return(0,a.oR)(j)}}}}var d=t(4246),m=function(e){var r=e.children;return(0,d.jsx)("ul",{className:"articles-wrapper list-unstyled",children:r})},j=t(303),h=function(e){var r=e.author,t=e.createdAt,n=e.children;return(0,d.jsxs)("div",{className:"article-meta",children:[(0,d.jsx)(j.rU,{to:"/@".concat(r.username),children:(0,d.jsx)("img",{alt:r.username,src:r.image})}),(0,d.jsxs)("div",{className:"info",children:[(0,d.jsx)(j.rU,{className:"author",to:"/@".concat(r.username),children:r.username}),(0,d.jsx)("span",{className:"date",children:new Date(t).toDateString()})]}),n]})},p=t(7391),b=function(e){var r=e.active,t=e.onClick,n=e.children;return(0,d.jsxs)(p.zx,{className:"btn-outline-primary","data-active":r,size:"sm",onClick:t,children:[(0,d.jsx)("i",{className:"ion-heart"})," ",n]})},v=function(e){var r=e.data,t=r.author,n=r.createdAt,c=r.slug,a=r.title,i=r.description,o=r.tagList,s=r.favorited,u=r.favoritesCount,l=e.onClick;return(0,d.jsxs)("article",{className:"article-preview",children:[(0,d.jsx)(h,{author:t,createdAt:n,children:(0,d.jsx)("div",{className:"pull-xs-right",children:(0,d.jsx)(b,{active:s,onClick:l,children:u})})}),(0,d.jsxs)(j.rU,{className:"preview-link",to:"/article/".concat(c),children:[(0,d.jsx)("h1",{children:a}),(0,d.jsx)("p",{children:i}),(0,d.jsx)("span",{children:"Read more..."}),(0,d.jsx)(p.PS,{children:o.map((function(e){return(0,d.jsx)(p.Vp,{children:e.toLowerCase()},e)}))})]})]})},g=function(e){return e.show?(0,d.jsx)("div",{className:"empty-articles article-preview",children:"No articles are here... yet."}):null},x=function(e){var r=e.loading,t=e.isEmpty,n=e.pageSize,c=e.pageNumber,i=e.totalPages,o=e.articles,s=e.onPageChange,u=e.onArticleClick;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g,{show:t}),(0,d.jsx)(m,{children:(0,a.sm)(o,{getKey:function(e){return e.slug},fn:function(e){return(0,d.jsx)("li",{children:(0,d.jsx)(v,{data:e,onClick:function(){return u(e)}})})}})}),(0,d.jsx)(p.tl,{current:c,pageSize:n,total:i,onPageChange:s}),(0,d.jsx)(p.$j,{loading:r})]})}},8430:function(e,r,t){t.r(r),t.d(r,{default:function(){return re}});var n=t(7378),c=t(303),a=t(7391),i=t(1288),o=t(3451),s=t(9635),u=t(1549),l=t(6942),f=(0,u.yM)(),d=(0,u.GW)((function(e){return l.U2("articles/".concat(e,"/comments")).then((function(e){return e.data.comments}))})),m=(0,u.GW)((function(e){var r=e.slug,t=e.body;return l.v_("articles/".concat(r,"/comments"),{comment:{body:t}}).then((function(e){return e.data.comment}))})),j=(0,u.GW)((function(e){var r=e.slug,t=e.id;return l.IV("articles/".concat(r,"/comments/").concat(t))}));(0,u.eH)({from:f,to:j});var h=(0,u.nu)(d.doneData,[]).on(m.doneData,(function(e,r){return[r].concat(e)})).on(j.done,(function(e,r){var t=r.params;return e.filter((function(e){return e.id!==t.id}))})),p=(0,u.MT)({errors:{}}).on([m.failData,j.failData],(function(e,r){var t;return null===(t=r.response)||void 0===t?void 0:t.data})),b=p.map((function(e){return Object.keys(Object(e)).length>0})),v=p.map((function(e){return Object.entries(Object(null==e?void 0:e.errors))})),g=t(9041),x=t(4246);function O(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?O(Object(t),!0).forEach((function(r){w(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function w(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var P={body:""};function N(){var e=(0,s.UO)().slug,r=(0,o.cI)({defaultValues:P}),t=r.handleSubmit,c=r.register,i=r.reset;return(0,n.useEffect)((function(){var e=m.done.watch((function(){i(P)}));return function(){return e()}})),(0,x.jsxs)(a.l0,{className:"card comment-form",onSubmit:t((function(r){var t=r.body;m({body:t,slug:e})})),children:[(0,x.jsx)("div",{className:"card-block",children:(0,x.jsx)(a.l0.Control,y({as:"textarea",placeholder:"Write a comment...",rows:3},c("body")))}),(0,x.jsx)(D,{})]})}function D(){var e=i.wl.useUser(),r=e.image,t=e.username;return(0,x.jsxs)("div",{className:"card-footer",children:[(0,x.jsx)("img",{alt:t,className:"comment-author-img",src:r}),(0,x.jsx)(a.zx,{className:"btn-primary",size:"sm",type:"submit",children:"Post Comment"})]})}var C=function(e){var r=e.author,t=e.onClick,n=i.wl.useUser().username,c=i.wl.useIsAuth(),o=n===r.username;return c&&o?(0,x.jsx)(a.zx,{className:"mod-options btn-delete",onClick:t,children:(0,x.jsx)("i",{className:"ion-trash-a"})}):null};function k(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function S(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?k(Object(t),!0).forEach((function(r){A(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function A(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function E(e){var r=e.data;return(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("div",{className:"card-block",children:(0,x.jsx)("p",{className:"card-text",children:r.body})}),(0,x.jsx)(U,S({},r))]})}function U(e){var r=e.author,t=e.createdAt,n=e.id,a=(0,s.UO)().slug;return(0,x.jsxs)("div",{className:"card-footer",children:[(0,x.jsx)(c.rU,{className:"comment-author",to:"/@".concat(r.username),children:(0,x.jsx)("img",{alt:r.username,className:"comment-author-img",src:r.image})})," ",(0,x.jsx)(c.rU,{className:"comment-author",to:"/@".concat(r.username),children:r.username}),(0,x.jsx)("span",{className:"date-posted",children:new Date(t).toDateString()}),(0,x.jsx)(C,{author:r,onClick:function(){f({slug:a,id:n})}})]})}var z=function(){var e=(0,s.UO)().slug;return(0,n.useEffect)((function(){e&&d(e)}),[e]),(0,x.jsx)(a.aV,{children:(0,g.sm)(h,{getKey:function(e){return e.id},fn:function(e){return(0,x.jsx)(E,{data:e})}})})},R=function(){var e=(0,g.oR)(b),r=(0,g.oR)(v);return e?(0,x.jsx)(a.KM,{errors:r}):null},I=function(){var e=i.wl.useIsAuth();return(0,x.jsx)(x.Fragment,{children:e?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(R,{}),(0,x.jsx)(N,{}),(0,x.jsx)(z,{})]}):null})},W=["createdAt"];function F(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function V(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?F(Object(t),!0).forEach((function(r){G(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function G(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function L(e,r){if(null==e)return{};var t,n,c=function(e,r){if(null==e)return{};var t,n,c={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(c[t]=e[t]);return c}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}var $=(0,u.yM)(),M=(0,u.GW)((function(e){return l.U2("articles/".concat(e)).then((function(e){return e.data.article})).then((function(e){var r=e.createdAt;return V(V({},L(e,W)),{},{createdAt:new Date(r).toDateString()})}))})),T=(0,u.GW)((function(e){return l.IV("articles/".concat(e))})),K=(0,u.nu)(M.doneData,{title:"",slug:"",body:"",createdAt:"",updatedAt:"",tagList:[],description:"",author:{username:"",bio:"",image:"",following:!1},favorited:!1,favoritesCount:0}),q=(0,u.$e)(K,i.o4.bR,(function(e,r){return e.author.username===r.username}));(0,u.eH)({from:$,to:T}),T.done.watch((function(){c.m8.push("/")}));var H=function(){return(0,g.oR)(K)},X=t(4080),_=function(){var e=H().tagList;return(0,x.jsx)(a.PS,{children:e.map((function(e){return(0,x.jsx)(a.Vp,{children:e.toLowerCase()},e)}))})},Z=function(){var e=H().body;return(0,x.jsx)(a.X2,{className:"article-content",children:(0,x.jsxs)("div",{className:"col-xs-12",children:[(0,x.jsx)(X.Z,{children:e}),(0,x.jsx)(_,{})]})})},B=t(6763),J=t(4289),Q=function(){var e=(0,g.oR)(q),r=H().slug;return(0,x.jsx)(x.Fragment,{children:e&&(0,x.jsxs)("span",{children:[(0,x.jsx)(J.rU,{to:"/editor/".concat(r),children:(0,x.jsxs)(a.zx,{className:"btn-outline-secondary",size:"sm",children:[(0,x.jsx)("i",{className:"ion-edit"})," Edit Article"]})}),(0,x.jsxs)(a.zx,{className:"btn-sm btn-outline-danger",onClick:function(){$(r)},children:[(0,x.jsx)("i",{className:"ion-trash-a"})," Delete Article"]})]})})},Y=function(){var e=H(),r=e.title,t=e.author,n=e.createdAt;return(0,x.jsx)(a.jL,{children:(0,x.jsxs)(a.W2,{children:[(0,x.jsx)("h1",{children:r}),(0,x.jsx)(B.qn,{author:t,createdAt:n,children:(0,x.jsx)(Q,{})})]})})},ee=function(){var e=i.wl.useIsAuth();return(0,x.jsx)(x.Fragment,{children:e?null:(0,x.jsxs)("p",{children:[(0,x.jsx)(c.rU,{to:"/login",children:"Sign in"})," or ",(0,x.jsx)(c.rU,{to:"/register",children:"sign up"})," to add comments on this article."]})})},re=function(){var e=(0,c.UO)().slug,r=(0,g.oR)(M.pending);return(0,n.useEffect)((function(){e&&M(e)}),[e]),(0,x.jsx)(x.Fragment,{children:!r&&(0,x.jsxs)("div",{className:"article-page",children:[(0,x.jsx)(Y,{}),(0,x.jsxs)(a.T3,{children:[(0,x.jsx)(Z,{}),(0,x.jsx)("hr",{}),(0,x.jsx)("div",{className:"article-actions"}),(0,x.jsx)(a.X2,{children:(0,x.jsxs)("div",{className:"col-xs-12 col-md-8 offset-md-2",children:[(0,x.jsx)(I,{}),(0,x.jsx)(ee,{})]})})]})]})})}}}]);