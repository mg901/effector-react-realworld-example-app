(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"I+tg":function(e,r,t){"use strict";t.r(r);var n=t("oNR1"),i=t("dY8W"),o=t("UYjC"),a=t("xArF"),u=t("SugE"),c=Object(u.d)(),s=Object(u.d)(),l=Object(a.a)({fields:{currentTag:{init:""}}});Object(u.j)({source:l.fields.currentTag.$value,clock:Object(u.g)(s,{filter:function(e){return"Enter"===e.key}}),target:c}),Object(u.f)({from:c,to:l.reset});var f=t("oYCi"),d=function(){var e=Object(a.c)(l).fields;return Object(f.jsx)(o.e,{onSubmit:function(e){return e.preventDefault()},children:Object(f.jsx)(o.g,{autoComplete:"off",name:"tag-list",placeholder:"Enter tags",value:e.currentTag.value,onChange:function(r){return e.currentTag.onChange(r.target.value)},onKeyDown:s})})},b=t("eZyy"),m=t("6le1");function v(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return j(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function O(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function g(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?O(Object(t),!0).forEach((function(r){p(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function p(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function h(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var y=Object(u.d)();y.watch((function(e){return e.preventDefault()}));var x=Object(u.d)(),E=Object(u.c)((function(e){return b.a.post("articles",{article:e}).then((function(e){return e.data.article}))})),$=Object(u.c)((function(e){return b.a.get("articles/".concat(e)).then((function(e){var r=e.data.article;return{slug:r.slug,title:r.title,description:r.description,body:r.body,tagList:r.tagList}}))})),w=Object(i.a)(),S=w.state.map((function(e){var r;return null!==(r=e.slug)&&void 0!==r?r:""})),V=S.map(Boolean).map((function(e){return!e})),T=Object(a.a)({fields:{slug:{init:""},title:{init:""},description:{init:""},body:{init:""},tagList:{init:[]}}});Object(u.g)({source:S,clock:w.open,filter:function(e){return!1==!e},target:T.reset});var C=T.fields.tagList.$value;Object(u.g)({source:S,clock:w.open,filter:Boolean,target:$}),Object(u.f)({from:$.doneData,to:T.set}),Object(u.j)({source:T.$values,clock:c,fn:function(e,r){var t,n=e.tagList;return g(g({},h(e,["tagList"])),{},{tagList:(t=[].concat(v(n),[r]),Array.from(new Set(t)))})},target:T.set}),Object(u.j)({source:T.$values,clock:x,fn:function(e,r){var t=e.tagList;return g(g({},h(e,["tagList"])),{},{tagList:t.filter((function(e){return e!==r}))})},target:T.set}),Object(u.f)({from:[E.done,V],to:T.reset}),Object(u.j)({source:T.$values,clock:T.submit,target:E}),E.doneData.watch((function(e){var r=e.slug;m.d.history.replace("/article/".concat(r))}));var k=Object(u.e)({errors:{}}).on(E.failData,(function(e,r){var t;return null===(t=r.response)||void 0===t?void 0:t.data})).reset(T.$values,w.close),D=function(){var e=Object(i.d)(k);return Object(f.jsx)(o.d,{errors:e})},A=function(){var e=Object(a.b)(T.fields.body),r=e.value,t=e.name,n=e.onChange;return Object(f.jsx)(o.r,{name:t,placeholder:"Write your article (in markdown)",rows:8,value:r,onChange:function(e){return n(e.target.value)}})},P=function(){var e=Object(a.b)(T.fields.description),r=e.value,t=e.name,n=e.onChange;return Object(f.jsx)(o.h,{name:t,placeholder:"What's this article about?",value:r,onChange:function(e){return n(e.target.value)}})},F=function(){var e=Object(a.b)(T.fields.title),r=e.value,t=e.name,n=e.onChange;return Object(f.jsx)(o.h,{className:"form-control-lg",name:t,placeholder:"Article Title",value:r,onChange:function(e){return n(e.target.value)}})},B=function(){return Object(f.jsxs)(o.e,{id:"editor",onSubmit:y,children:[Object(f.jsx)(F,{}),Object(f.jsx)(P,{}),Object(f.jsx)(A,{})]})},L=function(){var e=Object(a.c)(T).submit,r=Object(i.d)(E.pending);return Object(f.jsx)(o.b,{className:"btn-lg btn-primary pull-xs-right",disabled:r,form:"editor",type:"submit",onClick:function(r){r.preventDefault(),e()},children:"Publish article"})},I=function(e){var r=e.children,t=e.onClick;return Object(f.jsxs)("span",{className:"tag-default tag-pill",children:[r,Object(f.jsx)(o.b,{className:"btn-sm editor-tag",onClick:t,children:Object(f.jsx)("i",{className:"ion-close-round"})})]})},N=function(){return Object(f.jsx)(o.q,{children:Object(i.c)(C,{getKey:function(e){return e},fn:function(e){return Object(f.jsx)(I,{onClick:function(){return x(e)},children:e})}})})};r.default=function(){var e=Object(n.g)();return Object(i.b)(w,e),Object(f.jsx)(o.l,{children:Object(f.jsx)(o.n,{children:Object(f.jsxs)("div",{className:"col-md-10 offset-md-1 col-xs-12",children:[Object(f.jsx)(D,{}),Object(f.jsx)(B,{}),Object(f.jsx)(d,{}),Object(f.jsx)(N,{}),Object(f.jsx)(L,{})]})})})}},xArF:function(e,r,t){"use strict";t.d(r,"a",(function(){return b})),t.d(r,"b",(function(){return m})),t.d(r,"c",(function(){return v}));var n=t("YSF1"),i=t("dY8W");function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e){var r=e.init,t=e.domain;return e.existing||(t?t.store(r):Object(n.createStore)(r))},s=function(e){var r=e.domain;return e.existing||(r?r.event():Object(n.createEvent)())};function l(e,r,t){var i,o,a,u,l,f,d,b,m,v,j,O="function"==typeof r.init?r.init():r.init,g=c({domain:t,existing:null===(i=r.units)||void 0===i?void 0:i.$value,init:O}),p=c({domain:t,existing:null===(o=r.units)||void 0===o?void 0:o.$errors,init:[]}),h=p.map((function(e){return e[0]?e[0]:null})),y=g.map((function(e){return e!==O})),x=c({domain:t,existing:null===(a=r.units)||void 0===a?void 0:a.$isTouched,init:!1}),E=s({domain:t,existing:null===(u=r.units)||void 0===u?void 0:u.onChange}),$=s({domain:t,existing:null===(l=r.units)||void 0===l?void 0:l.onBlur}),w=s({domain:t,existing:null===(f=r.units)||void 0===f?void 0:f.changed}),S=s({domain:t,existing:null===(d=r.units)||void 0===d?void 0:d.addError}),V=s({domain:t,existing:null===(b=r.units)||void 0===b?void 0:b.validate}),T=s({domain:t,existing:null===(m=r.units)||void 0===m?void 0:m.resetErrors}),C=s({domain:t,existing:null===(v=r.units)||void 0===v?void 0:v.resetValue}),k=s({domain:t,existing:null===(j=r.units)||void 0===j?void 0:j.reset}),D=h.map((function(e){return null===e}));return{changed:w,name:e,$value:g,$errors:p,$firstError:h,$isValid:D,$isDirty:y,$isTouched:x,$touched:x,$field:Object(n.combine)({value:g,errors:p,firstError:h,isValid:D,isDirty:y,isTouched:x}),onChange:E,onBlur:$,addError:S,validate:V,set:E,reset:k,resetErrors:T,resetValue:C,filter:r.filter}}function f(e){var r,t=e.$form,i=e.validateFormEvent,a=e.submitEvent,c=e.resetFormEvent,s=e.resetValues,l=e.field,f=e.rules,d=e.resetErrors,b=e.formValidationEvents,m=e.fieldValidationEvents,v=l.$value,j=l.$errors,O=l.onBlur,g=l.changed,p=l.addError,h=l.validate,y=l.resetErrors,x=l.resetValue,E=l.reset,$="function"==typeof f?Object(n.createStore)([]):Object(n.combine)(f.map((function(e){return e.source||Object(n.createStore)(null)}))),w=(r=f,function(e,t,n){for(var i=[],o="function"==typeof r?r(e,t):r,a=0;a<o.length;a++){var c=o[a],s=n?n[a]:null,l=c.validator(e,t,s);"boolean"!=typeof l||l||i.push({rule:c.name,errorText:c.errorText,value:e}),"object"!=u(l)||l.isValid||i.push({rule:c.name,errorText:l.errorText,value:e})}return i}),S=[].concat(o(b),o(m)),V=[];if(S.includes("submit")){var T=Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:t,rulesSources:$}),clock:a});V.push(T)}S.includes("blur")&&V.push(Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:t,rulesSources:$}),clock:O})),S.includes("change")&&V.push(Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:t,rulesSources:$}),clock:Object(n.merge)([g,x,s])})),V.push(Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:t,rulesSources:$}),clock:h})),V.push(Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:t,rulesSources:$}),clock:i}));var C=Object(n.sample)({source:v,clock:p,fn:function(e,r){return{rule:r.rule,value:e,errorText:r.errorText}}});j.on(V,(function(e,r){var t=r.form,n=r.fieldValue,i=r.rulesSources;return w(n,t,i)})).on(C,(function(e,r){return[r].concat(o(e))})).reset(y,c,E,d),S.includes("change")||j.reset(g)}function d(e,r,t,i,o){var a=e.$value,u=e.$touched,c=e.onChange,s=e.changed,l=e.name,f=e.reset,d=e.resetValue,b=e.filter;u.on(s,(function(){return!0})).reset(f,t,i),Object(n.guard)({source:c,filter:b||function(){return!0},target:s}),a.on(s,(function(e,r){return r})).on(r,(function(e,r){return r.hasOwnProperty(l)?r[l]:e})).reset(f,d,o,t)}function b(e){var r=e.filter,t=e.domain,i=e.fields,o=e.validateOn,a=e.units,u={},c=[],b=[];for(var m in i)if(i.hasOwnProperty(m)){var v=l(m,i[m],t);u[m]=v,c.push(v.$isDirty),b.push(v.$touched)}var j=function(e){var r={};for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t].$value);return Object(n.combine)(r)}(u),O=function(e){var r=[];for(var t in e)if(e.hasOwnProperty(t)){var i=e[t].$firstError;r.push(i)}return Object(n.combine)(r).map((function(e){return e.every((function(e){return null===e}))}))}(u),g=r?Object(n.combine)(O,r,(function(e,r){return e&&r})):O,p=Object(n.combine)(c).map((function(e){return e.some(Boolean)})),h=Object(n.combine)(b).map((function(e){return e.some(Boolean)})),y=Object(n.combine)({isValid:O,isDirty:p,touched:h}),x=s({domain:t,existing:null==a?void 0:a.validate}),E=s({domain:t,existing:null==a?void 0:a.submit}),$=s({domain:t,existing:null==a?void 0:a.formValidated}),w=s({domain:t,existing:null==a?void 0:a.setForm}),S=s({domain:t,existing:null==a?void 0:a.reset}),V=s({domain:t,existing:null==a?void 0:a.resetValues}),T=s({domain:t,existing:null==a?void 0:a.resetErrors}),C=s({domain:t,existing:null==a?void 0:a.resetTouched}),k=Object(n.sample)(j,E),D=Object(n.sample)(j,x);for(var A in u)if(u.hasOwnProperty(A)){var P=i[A],F=u[A];d(F,w,S,C,V),P.rules&&f({$form:j,rules:P.rules,submitEvent:E,resetFormEvent:S,resetValues:V,resetErrors:T,validateFormEvent:x,field:F,formValidationEvents:o||["submit"],fieldValidationEvents:P.validateOn?P.validateOn:[]})}return Object(n.guard)({source:k,filter:g,target:$}),Object(n.guard)({source:D,filter:g,target:$}),{fields:u,$values:j,$eachValid:O,$isValid:O,$isDirty:p,$touched:h,$meta:y,submit:E,validate:x,resetTouched:C,reset:S,resetValues:V,resetErrors:T,setForm:w,set:w,formValidated:$}}function m(e){var r=Object(i.d)(e.$field),t=r.value,n=r.errors,o=r.firstError,a=r.isValid,u=r.isDirty,c=r.isTouched;return{name:e.name,value:t,errors:n,firstError:o,isValid:a,isDirty:u,touched:c,isTouched:c,onChange:e.onChange,onBlur:e.onBlur,addError:e.addError,validate:e.validate,reset:e.reset,set:e.onChange,resetErrors:e.resetErrors,hasError:function(){return null!==o},errorText:function(e){return o?e&&e[o.rule]?e[o.rule]:o.errorText||"":""}}}function v(e){var r={},t={};for(var n in e.fields)if(e.fields.hasOwnProperty(n)){var o=m(e.fields[n]);r[n]=o,t[n]=o.value}var a=Object(i.d)(e.$meta),u=a.isValid,c=a.isDirty,s=a.touched;return{fields:r,values:t,hasError:function(e){return e?!!r[e]&&Boolean(r[e].firstError):!u},eachValid:u,isValid:u,isDirty:c,isTouched:s,touched:s,errors:function(e){return r[e]?r[e].errors:[]},error:function(e){return r[e]?r[e].firstError:null},reset:e.reset,errorText:function(e,t){var n=r[e];return n&&n.firstError?t&&t[n.firstError.rule]?t[n.firstError.rule]:n.firstError.errorText||"":""},submit:e.submit,setForm:e.setForm,set:e.setForm,formValidated:e.formValidated}}}}]);