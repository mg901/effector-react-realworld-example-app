"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[100],{1451:function(e,t,r){r.d(t,{qn:function(){return p},fR:function(){return O},o4:function(){return n}});var n={};r.r(n),r.d(n,{createFeed:function(){return d},createPagination:function(){return m}});var a=r(1549),c=r(9041),o=r(8737),i=r(3719),s=r(6942);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=e.pageSize,r=e.effect,n=(0,a.MT)({articlesCount:0,articles:[]}).on(r.doneData,(function(e,t){return t})),o=n.map((function(e){return e.articlesCount})),u=n.map((function(e){return e.articles})),f=(0,i.status)({effect:r}),d=(0,a.$e)(f,u,(function(e,t){return("done"===e||"fail"===e)&&0===t.length})),g=m(t),h=g.paginationChanged,j=g.$pageSize,p=g.$pageIndex,v=g.$pageNumber;return{paginationChanged:h,favoriteArticleToggled:function(e){var t=(0,a.yM)(),r=(0,a.GW)((function(e){var t=e.slug;return s.v_("articles/".concat(t,"/favorite")).then((function(e){return e.data}))})),n=(0,a.GW)((function(e){var t=e.slug;return s.IV("articles/".concat(t,"/favorite")).then((function(e){return e.data}))}));return e.on([r.done,n.done],(function(e,t){var r=t.params,n=t.result;return l(l({},e),{},{articles:e.articles.map((function(e){return e.slug!==r.slug?e:l(l({},e),{},{favorited:n.article.favorited,favoritesCount:n.article.favoritesCount})}))})})),(0,a.Vl)({source:t,match:{favorite:function(e){return!0===e.favorited},unfavorite:function(e){return!1===e.favorited}},cases:{favorite:n,unfavorite:r}}),{favoriteArticleToggled:t}}(n).favoriteArticleToggled,$totalPages:o,$articles:u,$isEmptyFeed:d,$pageSize:j,$pageIndex:p,$pageNumber:v,selectors:{useLoading:function(){return(0,c.oR)(r.pending)},useIsEmpty:function(){return(0,c.oR)(d)},usePageSize:function(){return(0,c.oR)(j)},usePageIndex:function(){return(0,c.oR)(p)},usePageNumber:function(){return(0,c.oR)(v)},useTotalPages:function(){return(0,c.oR)(o)}}}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=(0,a.yM)(),r=(0,a.MT)(e),n=(0,a.MT)("1").on(t.map(String),(function(e,t){return t})),c=n.map(Number);(0,o.tJ)({store:n,key:"page"});var i=c.map((function(e){return e-1}));return{paginationChanged:t,$pageSize:r,$pageNumber:c,$pageIndex:i}}var g=r(4246),h=function(e){var t=e.children;return(0,g.jsx)("ul",{className:"articles-wrapper list-unstyled",children:t})},j=r(5483),p=function(e){var t=e.author,r=e.createdAt,n=e.children;return(0,g.jsxs)("div",{className:"article-meta",children:[(0,g.jsx)(j.rU,{to:"/@".concat(t.username),children:(0,g.jsx)("img",{alt:t.username,src:t.image})}),(0,g.jsxs)("div",{className:"info",children:[(0,g.jsx)(j.rU,{className:"author",to:"/@".concat(t.username),children:t.username}),(0,g.jsx)("span",{className:"date",children:new Date(r).toDateString()})]}),n]})},v=r(9511),b=function(e){var t=e.active,r=e.onClick,n=e.children;return(0,g.jsxs)(v.zx,{className:"btn btn-sm btn-outline-primary","data-active":t,onClick:r,children:[(0,g.jsx)("i",{className:"ion-heart"})," ",n]})},x=function(e){var t=e.data,r=t.author,n=t.createdAt,a=t.slug,c=t.title,o=t.description,i=t.tagList,s=t.favorited,u=t.favoritesCount,l=e.onClick;return(0,g.jsxs)("article",{className:"article-preview",children:[(0,g.jsx)(p,{author:r,createdAt:n,children:(0,g.jsx)("div",{className:"pull-xs-right",children:(0,g.jsx)(b,{active:s,onClick:l,children:u})})}),(0,g.jsxs)(j.rU,{className:"preview-link",to:"/article/".concat(a),children:[(0,g.jsx)("h1",{children:c}),(0,g.jsx)("p",{children:o}),(0,g.jsx)("span",{children:"Read more..."}),(0,g.jsx)(v.PS,{children:i.map((function(e){return(0,g.jsx)(v.Vp,{children:e.toLowerCase()},e)}))})]})]})},y=function(e){return e.show?(0,g.jsx)("div",{className:"empty-articles article-preview",children:"No articles are here... yet."}):null},O=function(e){var t=e.loading,r=e.isEmpty,n=e.pageSize,a=e.pageNumber,o=e.totalPages,i=e.articles,s=e.onPageChange,u=e.onArticleClick;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(y,{show:r}),(0,g.jsx)(h,{children:(0,c.sm)(i,{getKey:function(e){return e.slug},fn:function(e){return(0,g.jsx)("li",{children:(0,g.jsx)(x,{data:e,onClick:function(){return u(e)}})})}})}),(0,g.jsx)(v.tl,{current:a,pageSize:n,total:o,onPageChange:s}),(0,g.jsx)(v.$j,{loading:t})]})}},3100:function(e,t,r){r.r(t),r.d(t,{default:function(){return Z}});var n=r(9041),a=r(5483),c=r(9511),o=r(3312),i=r(227),s=r(1549),u=r(6942),l=["createdAt"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var h=(0,s.Fj)("article-page"),j=h.createEvent(),p=h.createEffect((function(e){return u.U2("articles/".concat(e)).then((function(e){return e.data.article})).then((function(e){var t=e.createdAt;return d(d({},g(e,l)),{},{createdAt:new Date(t).toDateString()})}))})),v=h.createEffect((function(e){return u.IV("articles/".concat(e))})),b=(0,n.Bq)(),x=b.state.map((function(e){return e.slug})),y=(0,s.nu)(p.doneData,{title:"",slug:"",body:"",createdAt:"",updatedAt:"",tagList:[],description:"",author:{username:"",bio:"",image:"",following:!1},favorited:!1,favoritesCount:0}),O=(0,s.$e)(y,o.o4.bR,(function(e,t){return e.author.username===t.username}));(0,s.UP)({source:x,clock:b.open,target:p}),(0,s.UP)({source:x,clock:j,target:v}),v.done.watch((function(){a.m8.push("/")}));var w=r(8438),P=(0,s.yM)(),N=(0,s.GW)((function(e){return u.U2("articles/".concat(e,"/comments")).then((function(e){return e.data.comments}))})),D=(0,s.GW)((function(e){var t=e.slug,r=e.body;return u.v_("articles/".concat(t,"/comments"),{body:r}).then((function(e){return e.data.comment}))})),C=(0,s.GW)((function(e){var t=e.slug,r=e.id;return u.IV("articles/".concat(t,"/comments/").concat(r))})),k=(0,n.Bq)(),S=k.state.map((function(e){return e.slug})),A=(0,s.nu)(N.doneData,[]).on(D.doneData,(function(e,t){return[t].concat(e)})).on(C.done,(function(e,t){var r=t.params;return e.filter((function(e){return e.id!==r.id}))})),R=(0,w.Np)({fields:{comment:{init:""}}});(0,s.UP)({source:S,clock:S.updates,target:N}),(0,s.UP)({source:{slug:S,body:R.fields.comment.$value},clock:R.submit,target:D}),(0,s.eH)({from:D,to:R.reset}),(0,s.UP)({source:S,clock:P,fn:function(e,t){return{slug:e,id:t}},target:C}),i.o._4.on([D.failData,C.failData],(function(e,t){var r;return null===(r=t.response)||void 0===r?void 0:r.data})).reset(R.$touched);var $=r(4246),I=function(){var e=(0,n.oR)(o.o4.bR),t=e.image,r=e.username;return(0,$.jsxs)("div",{className:"card-footer",children:[(0,$.jsx)("img",{alt:r,className:"comment-author-img",src:t}),(0,$.jsx)(c.zx,{className:"btn-sm btn-primary",type:"submit",children:"Post Comment"})]})},U=function(){var e=(0,w.cI)(R),t=e.submit,r=e.fields;return(0,$.jsxs)(c.l0,{className:"card comment-form",onSubmit:function(e){e.preventDefault(),t()},children:[(0,$.jsx)("div",{className:"card-block",children:(0,$.jsx)(c.NI,{as:"textarea",placeholder:"Write a comment...",rows:3,value:r.comment.value,onChange:function(e){return r.comment.onChange(e.target.value)}})}),(0,$.jsx)(I,{})]})},E=function(e){var t=e.author,r=e.onClick,a=(0,n.oR)(o.o4.bR).username,i=o.wl.useIsAuth(),s=a===t.username;return i&&s?(0,$.jsx)(c.zx,{className:"mod-options btn-delete",onClick:r,children:(0,$.jsx)("i",{className:"ion-trash-a"})}):null},z=function(e){var t=e.author,r=e.createdAt,n=e.id;return(0,$.jsxs)("div",{className:"card-footer",children:[(0,$.jsx)(a.rU,{className:"comment-author",to:"/@".concat(t.username),children:(0,$.jsx)("img",{alt:t.username,className:"comment-author-img",src:t.image})})," ",(0,$.jsx)(a.rU,{className:"comment-author",to:"/@".concat(t.username),children:t.username}),(0,$.jsx)("span",{className:"date-posted",children:new Date(r).toDateString()}),(0,$.jsx)(E,{author:t,onClick:function(){return P(n)}})]})};function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L=function(e){var t=e.comment;return(0,$.jsxs)("div",{className:"card",children:[(0,$.jsx)("div",{className:"card-block",children:(0,$.jsx)("p",{className:"card-text",children:t.body})}),(0,$.jsx)(z,T({},t))]})},V=function(){return(0,$.jsx)(c.aV,{children:(0,n.sm)(A,{getKey:function(e){return e.id},fn:function(e){return(0,$.jsx)(L,{comment:e})}})})},W=function(e){var t=e.slug;(0,n.DD)(b,{slug:t}),(0,n.DD)(k,{slug:t});var r=o.wl.useIsAuth();return(0,$.jsx)($.Fragment,{children:r?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(i.K,{}),(0,$.jsx)(U,{}),(0,$.jsx)(V,{})]}):null})},G=r(4080),q=function(){var e=(0,n.oR)(y).tagList;return(0,$.jsx)(c.PS,{children:e.map((function(e){return(0,$.jsx)(c.Vp,{children:e.toLowerCase()},e)}))})},K=function(){var e=(0,n.oR)(y).body;return(0,$.jsx)(c.X2,{className:"article-content",children:(0,$.jsxs)("div",{className:"col-xs-12",children:[(0,$.jsx)(G.Z,{children:e}),(0,$.jsx)(q,{})]})})},_=r(1451),B=r(4289),X=function(){var e=(0,n.oR)(O),t=(0,n.oR)(y).slug;return(0,$.jsx)($.Fragment,{children:e&&(0,$.jsxs)("span",{children:[(0,$.jsx)(B.rU,{to:"/editor/".concat(t),children:(0,$.jsxs)(c.zx,{className:"btn-sm btn-outline-secondary",children:[(0,$.jsx)("i",{className:"ion-edit"})," Edit Article"]})}),(0,$.jsxs)(c.zx,{className:"btn-sm btn-outline-danger",onClick:j,children:[(0,$.jsx)("i",{className:"ion-trash-a"})," Delete Article"]})]})})},H=function(){var e=(0,n.oR)(y),t=e.title,r=e.author,a=e.createdAt;return(0,$.jsx)(c.jL,{children:(0,$.jsxs)(c.W2,{children:[(0,$.jsx)("h1",{children:t}),(0,$.jsx)(_.qn,{author:r,createdAt:a,children:(0,$.jsx)(X,{})})]})})},J=function(){var e=o.wl.useIsAuth();return(0,$.jsx)($.Fragment,{children:e?null:(0,$.jsxs)("p",{children:[(0,$.jsx)(a.rU,{to:"/login",children:"Sign in"})," or ",(0,$.jsx)(a.rU,{to:"/register",children:"sign up"})," to add comments on this article."]})})},Z=function(){var e=(0,a.UO)().slug;(0,n.DD)(b,{slug:e});var t=(0,n.oR)(p.pending);return(0,$.jsx)($.Fragment,{children:!t&&(0,$.jsxs)("div",{className:"article-page",children:[(0,$.jsx)(H,{}),(0,$.jsxs)(c.T3,{children:[(0,$.jsx)(K,{}),(0,$.jsx)("hr",{}),(0,$.jsx)("div",{className:"article-actions"}),(0,$.jsx)(c.X2,{children:(0,$.jsxs)("div",{className:"col-xs-12 col-md-8 offset-md-2",children:[(0,$.jsx)(W,{slug:e}),(0,$.jsx)(J,{})]})})]})]})})}},227:function(e,t,r){r.d(t,{K:function(){return f},o:function(){return n}});var n={};r.r(n),r.d(n,{_4:function(){return a},l6:function(){return o},CD:function(){return c}});var a=(0,r(1549).MT)({errors:{}}),c=a.map((function(e){return Object.keys(e).length})),o=a.map((function(e){return Object.entries(e.errors)})),i=r(9041),s=r(4246);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,c=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(c.push(n.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(){var e=(0,i.oR)(c),t=(0,i.oR)(o);return(0,s.jsx)(s.Fragment,{children:e&&(0,s.jsx)("ul",{className:"error-messages",children:t.map((function(e){var t=u(e,2),r=t[0],n=t[1];return(0,s.jsxs)("li",{children:[r," ",n]},r)}))})})}}}]);