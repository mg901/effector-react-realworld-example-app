"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[267],{6763:function(e,t,r){r.d(t,{qn:function(){return g},fR:function(){return y},o4:function(){return n}});var n={};r.r(n),r.d(n,{createFeed:function(){return d},createPagination:function(){return m}});var a=r(1549),c=r(9041),i=r(8737),o=r(3719),s=r(6942);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=e.pageSize,r=e.effect,n=(0,a.MT)({articlesCount:0,articles:[]}).on(r.doneData,(function(e,t){return t})),i=n.map((function(e){return e.articlesCount})),u=n.map((function(e){return e.articles})),f=(0,o.status)({effect:r}),d=(0,a.$e)(f,u,(function(e,t){return("done"===e||"fail"===e)&&0===t.length})),j=m(t),p=j.paginationChanged,h=j.$pageSize,g=j.$pageIndex,b=j.$pageNumber;return{paginationChanged:p,favoriteArticleToggled:function(e){var t=(0,a.yM)(),r=(0,a.GW)((function(e){var t=e.slug;return s.v_("articles/".concat(t,"/favorite")).then((function(e){return e.data}))})),n=(0,a.GW)((function(e){var t=e.slug;return s.IV("articles/".concat(t,"/favorite")).then((function(e){return e.data}))}));return e.on([r.done,n.done],(function(e,t){var r=t.params,n=t.result;return l(l({},e),{},{articles:e.articles.map((function(e){return e.slug!==r.slug?e:l(l({},e),{},{favorited:n.article.favorited,favoritesCount:n.article.favoritesCount})}))})})),(0,a.Vl)({source:t,match:{favorite:function(e){return!0===e.favorited},unfavorite:function(e){return!1===e.favorited}},cases:{favorite:n,unfavorite:r}}),{favoriteArticleToggled:t}}(n).favoriteArticleToggled,$totalPages:i,$articles:u,$isEmptyFeed:d,$pageSize:h,$pageIndex:g,$pageNumber:b,selectors:{useLoading:function(){return(0,c.oR)(r.pending)},useIsEmpty:function(){return(0,c.oR)(d)},usePageSize:function(){return(0,c.oR)(h)},usePageIndex:function(){return(0,c.oR)(g)},usePageNumber:function(){return(0,c.oR)(b)},useTotalPages:function(){return(0,c.oR)(i)}}}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=(0,a.yM)(),r=(0,a.MT)(e),n=(0,a.MT)("1").on(t.map(String),(function(e,t){return t})),c=n.map(Number);(0,i.tJ)({store:n,key:"page"});var o=c.map((function(e){return e-1}));return{paginationChanged:t,$pageSize:r,$pageNumber:c,$pageIndex:o}}var j=r(4246),p=function(e){var t=e.children;return(0,j.jsx)("ul",{className:"articles-wrapper list-unstyled",children:t})},h=r(303),g=function(e){var t=e.author,r=e.createdAt,n=e.children;return(0,j.jsxs)("div",{className:"article-meta",children:[(0,j.jsx)(h.rU,{to:"/@".concat(t.username),children:(0,j.jsx)("img",{alt:t.username,src:t.image})}),(0,j.jsxs)("div",{className:"info",children:[(0,j.jsx)(h.rU,{className:"author",to:"/@".concat(t.username),children:t.username}),(0,j.jsx)("span",{className:"date",children:new Date(r).toDateString()})]}),n]})},b=r(2636),v=function(e){var t=e.active,r=e.onClick,n=e.children;return(0,j.jsxs)(b.zx,{className:"btn-outline-primary","data-active":t,size:"sm",onClick:r,children:[(0,j.jsx)("i",{className:"ion-heart"})," ",n]})},x=function(e){var t=e.data,r=t.author,n=t.createdAt,a=t.slug,c=t.title,i=t.description,o=t.tagList,s=t.favorited,u=t.favoritesCount,l=e.onClick;return(0,j.jsxs)("article",{className:"article-preview",children:[(0,j.jsx)(g,{author:r,createdAt:n,children:(0,j.jsx)("div",{className:"pull-xs-right",children:(0,j.jsx)(v,{active:s,onClick:l,children:u})})}),(0,j.jsxs)(h.rU,{className:"preview-link",to:"/article/".concat(a),children:[(0,j.jsx)("h1",{children:c}),(0,j.jsx)("p",{children:i}),(0,j.jsx)("span",{children:"Read more..."}),(0,j.jsx)(b.PS,{children:o.map((function(e){return(0,j.jsx)(b.Vp,{children:e.toLowerCase()},e)}))})]})]})},O=function(e){return e.show?(0,j.jsx)("div",{className:"empty-articles article-preview",children:"No articles are here... yet."}):null},y=function(e){var t=e.loading,r=e.isEmpty,n=e.pageSize,a=e.pageNumber,i=e.totalPages,o=e.articles,s=e.onPageChange,u=e.onArticleClick;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(O,{show:r}),(0,j.jsx)(p,{children:(0,c.sm)(o,{getKey:function(e){return e.slug},fn:function(e){return(0,j.jsx)("li",{children:(0,j.jsx)(x,{data:e,onClick:function(){return u(e)}})})}})}),(0,j.jsx)(b.tl,{current:a,pageSize:n,total:i,onPageChange:s}),(0,j.jsx)(b.$j,{loading:t})]})}},267:function(e,t,r){r.r(t),r.d(t,{default:function(){return Q}});var n=r(7378),a=r(303),c=r(2636),i=r(1288),o=r(4344),s=r(3451),u=r(9635),l=r(1549),f=r(6942),d=(0,l.yM)(),m=(0,l.GW)((function(e){return f.U2("articles/".concat(e,"/comments")).then((function(e){return e.data.comments}))})),j=(0,l.GW)((function(e){var t=e.slug,r=e.body;return f.v_("articles/".concat(t,"/comments"),{body:r}).then((function(e){return e.data.comment}))})),p=(0,l.GW)((function(e){var t=e.slug,r=e.id;return f.IV("articles/".concat(t,"/comments/").concat(r))}));(0,l.eH)({from:d,to:p});var h=(0,l.nu)(m.doneData,[]).on(j.doneData,(function(e,t){return[t].concat(e)})).on(p.done,(function(e,t){var r=t.params;return e.filter((function(e){return e.id!==r.id}))}));o.o._4.on([j.failData,p.failData],(function(e,t){var r;return null===(r=t.response)||void 0===r?void 0:r.data}));var g=r(4246);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O={body:""};function y(){var e=(0,u.UO)().slug,t=(0,s.cI)({defaultValues:O}),r=t.handleSubmit,a=t.register,i=t.reset;return(0,n.useEffect)((function(){var e=j.done.watch((function(){i(O)}));return function(){return e()}})),(0,g.jsxs)(c.l0,{className:"card comment-form",onSubmit:r((function(t){var r=t.body;j({body:r,slug:e})})),children:[(0,g.jsx)("div",{className:"card-block",children:(0,g.jsx)(c.l0.Control,v({as:"textarea",placeholder:"Write a comment...",rows:3},a("body")))}),(0,g.jsx)(w,{})]})}function w(){var e=i.wl.useUser(),t=e.image,r=e.username;return(0,g.jsxs)("div",{className:"card-footer",children:[(0,g.jsx)("img",{alt:r,className:"comment-author-img",src:t}),(0,g.jsx)(c.zx,{className:"btn-primary",size:"sm",type:"submit",children:"Post Comment"})]})}var P=r(9041),N=function(e){var t=e.author,r=e.onClick,n=i.wl.useUser().username,a=i.wl.useIsAuth(),o=n===t.username;return a&&o?(0,g.jsx)(c.zx,{className:"mod-options btn-delete",onClick:r,children:(0,g.jsx)("i",{className:"ion-trash-a"})}):null};function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e){var t=e.data;return(0,g.jsxs)("div",{className:"card",children:[(0,g.jsx)("div",{className:"card-block",children:(0,g.jsx)("p",{className:"card-text",children:t.body})}),(0,g.jsx)(A,C({},t))]})}function A(e){var t=e.author,r=e.createdAt,n=e.id,c=(0,u.UO)().slug;return(0,g.jsxs)("div",{className:"card-footer",children:[(0,g.jsx)(a.rU,{className:"comment-author",to:"/@".concat(t.username),children:(0,g.jsx)("img",{alt:t.username,className:"comment-author-img",src:t.image})})," ",(0,g.jsx)(a.rU,{className:"comment-author",to:"/@".concat(t.username),children:t.username}),(0,g.jsx)("span",{className:"date-posted",children:new Date(r).toDateString()}),(0,g.jsx)(N,{author:t,onClick:function(){d({slug:c,id:n})}})]})}var E=function(){var e=(0,u.UO)().slug;return(0,n.useEffect)((function(){e&&m(e)}),[e]),(0,g.jsx)(c.aV,{children:(0,P.sm)(h,{getKey:function(e){return e.id},fn:function(e){return(0,g.jsx)(k,{data:e})}})})},U=function(){var e=i.wl.useIsAuth();return(0,g.jsx)(g.Fragment,{children:e?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.K,{}),(0,g.jsx)(y,{}),(0,g.jsx)(E,{})]}):null})},z=["createdAt"];function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var F=(0,l.yM)(),T=(0,l.GW)((function(e){return f.U2("articles/".concat(e)).then((function(e){return e.data.article})).then((function(e){var t=e.createdAt;return I(I({},W(e,z)),{},{createdAt:new Date(t).toDateString()})}))})),V=(0,l.GW)((function(e){return f.IV("articles/".concat(e))})),G=(0,l.nu)(T.doneData,{title:"",slug:"",body:"",createdAt:"",updatedAt:"",tagList:[],description:"",author:{username:"",bio:"",image:"",following:!1},favorited:!1,favoritesCount:0}),L=(0,l.$e)(G,i.o4.bR,(function(e,t){return e.author.username===t.username}));(0,l.eH)({from:F,to:V}),V.done.watch((function(){a.m8.push("/")}));var M=function(){return(0,P.oR)(G)},K=r(4080),_=function(){var e=M().tagList;return(0,g.jsx)(c.PS,{children:e.map((function(e){return(0,g.jsx)(c.Vp,{children:e.toLowerCase()},e)}))})},q=function(){var e=M().body;return(0,g.jsx)(c.X2,{className:"article-content",children:(0,g.jsxs)("div",{className:"col-xs-12",children:[(0,g.jsx)(K.Z,{children:e}),(0,g.jsx)(_,{})]})})},H=r(6763),X=r(4289),J=function(){var e=(0,P.oR)(L),t=M().slug;return(0,g.jsx)(g.Fragment,{children:e&&(0,g.jsxs)("span",{children:[(0,g.jsx)(X.rU,{to:"/editor/".concat(t),children:(0,g.jsxs)(c.zx,{className:"btn-outline-secondary",size:"sm",children:[(0,g.jsx)("i",{className:"ion-edit"})," Edit Article"]})}),(0,g.jsxs)(c.zx,{className:"btn-sm btn-outline-danger",onClick:function(){F(t)},children:[(0,g.jsx)("i",{className:"ion-trash-a"})," Delete Article"]})]})})},Z=function(){var e=M(),t=e.title,r=e.author,n=e.createdAt;return(0,g.jsx)(c.jL,{children:(0,g.jsxs)(c.W2,{children:[(0,g.jsx)("h1",{children:t}),(0,g.jsx)(H.qn,{author:r,createdAt:n,children:(0,g.jsx)(J,{})})]})})},B=function(){var e=i.wl.useIsAuth();return(0,g.jsx)(g.Fragment,{children:e?null:(0,g.jsxs)("p",{children:[(0,g.jsx)(a.rU,{to:"/login",children:"Sign in"})," or ",(0,g.jsx)(a.rU,{to:"/register",children:"sign up"})," to add comments on this article."]})})},Q=function(){var e=(0,a.UO)().slug,t=(0,P.oR)(T.pending);return(0,n.useEffect)((function(){e&&T(e)}),[e]),(0,g.jsx)(g.Fragment,{children:!t&&(0,g.jsxs)("div",{className:"article-page",children:[(0,g.jsx)(Z,{}),(0,g.jsxs)(c.T3,{children:[(0,g.jsx)(q,{}),(0,g.jsx)("hr",{}),(0,g.jsx)("div",{className:"article-actions"}),(0,g.jsx)(c.X2,{children:(0,g.jsxs)("div",{className:"col-xs-12 col-md-8 offset-md-2",children:[(0,g.jsx)(U,{}),(0,g.jsx)(B,{})]})})]})]})})}}}]);